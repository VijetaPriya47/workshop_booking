{% extends 'workshop_app/base.html' %}
{% load custom_filters %}
{% block title %}
	View List of available Workshops
{% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h2 class="text-center mb-4">Workshop Types</h2>
                
                {% if request.user|has_group:"instructor" %}
                <div class="text-center mb-4">
                    <a href="{% url 'workshop_app:add_workshop_type' %}" class="btn btn-primary">
                        <span class="material-icons" aria-hidden="true">add</span>
                        Add Workshop Type
                    </a>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Desktop Table View -->
        <div class="d-none d-md-block">
            <div class="table-responsive">
                <table class="table table-hover" role="table" aria-label="Workshop types list">
                    <thead>
                        <tr role="row">
                            <th scope="col" role="columnheader">#</th>
                            <th scope="col" role="columnheader">Workshop Name</th>
                            <th scope="col" role="columnheader">Duration (Days)</th>
                            <th scope="col" role="columnheader">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for w in workshop_type %}
                        <tr role="row">
                            <td scope="row" role="cell">{{ forloop.counter }}</td>
                            <td role="cell">{{ w.name }}</td>
                            <td role="cell">{{ w.duration }}</td>
                            <td role="cell">
                                <a href="{% url 'workshop_app:workshop_type_details' w.id %}" 
                                   class="btn btn-outline-info" 
                                   aria-label="View details for {{ w.name }}">
                                    <span class="material-icons" aria-hidden="true">visibility</span>
                                    View Details
                                </a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Mobile Card View -->
        <div class="d-md-none">
            {% for w in workshop_type %}
            <div class="card mb-3" role="article" aria-labelledby="workshop-{{ w.id }}-title">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <h5 class="card-title mb-0" id="workshop-{{ w.id }}-title">{{ w.name }}</h5>
                        <span class="badge badge-primary">{{ forloop.counter }}</span>
                    </div>
                    <p class="card-text text-muted mb-3">
                        <span class="material-icons" aria-hidden="true" style="vertical-align: middle; font-size: 1rem;">schedule</span>
                        Duration: {{ w.duration }} days
                    </p>
                    <a href="{% url 'workshop_app:workshop_type_details' w.id %}" 
                       class="btn btn-primary btn-block" 
                       aria-label="View details for {{ w.name }}">
                        <span class="material-icons" aria-hidden="true">visibility</span>
                        View Workshop Details
                    </a>
                </div>
            </div>
            {% empty %}
            <div class="card">
                <div class="card-body text-center">
                    <span class="material-icons" aria-hidden="true" style="font-size: 3rem; color: var(--text-muted);">inbox</span>
                    <h5 class="mt-3">No Workshop Types Available</h5>
                    <p class="text-muted">There are currently no workshop types to display.</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

	    <!-- The Modal -->
	    <div id="mailModal" class="modal">

	    <!-- Modal content -->
	    <div class="modal-content">
		<span class="close">&times;</span>
		<p>Separate Multiple Email Id's using <strong> comma (,)</strong></p>
		<form action="{{URL_ROOT}}/share_details/" method="POST">
		  {% csrf_token %}
		    <label > Email: </label>
		    <input name="email" type='email' multiple>
		    <input type='submit'>
		</form>
	    </div>
	    </div>

<!-- Page Navigation -->
	<div class="container">

		<div class="Page-Nav" align="center">
		<nav aria-label="Page navigation">
		 	<ul class="pagination pagination-sm">
			  	<li class="page-item">
			      {% if workshoptype.has_previous %}
					<a class="page-link" tabindex="-1" 
							href="?page={{ workshop_type.previous_page_number }}">Previous</a>
				{% endif %}
			    </li>
			    <li class="page-item">
			    <span class="current">
				Page {{ workshop_type.number }} of {{ workshop_type.paginator.num_pages }}
					</span>
				</li>
			    <li class="page-item">
			    {% if workshop_type.has_next %}
					<a class="page-link" href="?page={{ workshop_type.next_page_number }}">Next
					</a>
				{% endif %}
			    </li>
		  	</ul>
		</nav>
		</div>
	</div>
</div>
{% endblock %}
